{"ast":null,"code":"import { Subject, takeUntil } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction ShortUrlsComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.errorMessage);\n  }\n}\nfunction ShortUrlsComponent_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\")(10, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function ShortUrlsComponent_tr_17_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const shortUrl_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.viewDetails(shortUrl_r2.urlId));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const shortUrl_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(shortUrl_r2.urlId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(shortUrl_r2.shortUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(shortUrl_r2.createdAt);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(shortUrl_r2.ownerUser.name);\n  }\n}\nclass ShortUrlsComponent {\n  constructor(http, router) {\n    this.http = http;\n    this.router = router;\n    this.shortUrls = [];\n    this.newUrl = '';\n    this.errorMessage = '';\n    this.destroy$ = new Subject();\n  }\n  ngOnInit() {\n    this.loadShortUrls();\n  }\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n  loadShortUrls() {\n    this.http.get('api/short-urls').pipe(takeUntil(this.destroy$)).subscribe(shortUrls => {\n      this.shortUrls = shortUrls;\n    });\n  }\n  addNewUrl() {\n    if (this.newUrl) {\n      this.http.post('api/short-urls', {\n        url: this.newUrl\n      }).pipe(takeUntil(this.destroy$)).subscribe(response => {\n        this.loadShortUrls();\n        this.newUrl = '';\n        this.errorMessage = '';\n      }, error => {\n        // Handle error, e.g., set error message\n        this.errorMessage = 'URL already exists.';\n      });\n    }\n  }\n  deleteUrl(id) {\n    this.http.delete(`api/short-urls/${id}`).pipe(takeUntil(this.destroy$)).subscribe(() => {\n      this.loadShortUrls();\n    });\n  }\n  viewDetails(id) {\n    this.router.navigate([`/short-url-info/${id}`]);\n  }\n}\nShortUrlsComponent.ɵfac = function ShortUrlsComponent_Factory(t) {\n  return new (t || ShortUrlsComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.Router));\n};\nShortUrlsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ShortUrlsComponent,\n  selectors: [[\"app-short-urls\"]],\n  decls: 18,\n  vars: 2,\n  consts: [[\"class\", \"error-message\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [1, \"error-message\"], [3, \"click\"]],\n  template: function ShortUrlsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h2\");\n      i0.ɵɵtext(1, \"Short URLs Table View\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, ShortUrlsComponent_div_2_Template, 2, 1, \"div\", 0);\n      i0.ɵɵelementStart(3, \"table\")(4, \"thead\")(5, \"tr\")(6, \"th\");\n      i0.ɵɵtext(7, \"ID\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"th\");\n      i0.ɵɵtext(9, \"Short URL\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"th\");\n      i0.ɵɵtext(11, \"Created At\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"th\");\n      i0.ɵɵtext(13, \"Owner User\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"th\");\n      i0.ɵɵtext(15, \"Actions\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(16, \"tbody\");\n      i0.ɵɵtemplate(17, ShortUrlsComponent_tr_17_Template, 11, 4, \"tr\", 1);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"ngForOf\", ctx.shortUrls);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { ShortUrlsComponent };","map":{"version":3,"names":["Subject","takeUntil","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r0","errorMessage","ɵɵlistener","ShortUrlsComponent_tr_17_Template_button_click_10_listener","restoredCtx","ɵɵrestoreView","_r4","shortUrl_r2","$implicit","ctx_r3","ɵɵnextContext","ɵɵresetView","viewDetails","urlId","shortUrl","createdAt","ownerUser","name","ShortUrlsComponent","constructor","http","router","shortUrls","newUrl","destroy$","ngOnInit","loadShortUrls","ngOnDestroy","next","complete","get","pipe","subscribe","addNewUrl","post","url","response","error","deleteUrl","id","delete","navigate","ɵɵdirectiveInject","i1","HttpClient","i2","Router","selectors","decls","vars","consts","template","ShortUrlsComponent_Template","rf","ctx","ɵɵtemplate","ShortUrlsComponent_div_2_Template","ShortUrlsComponent_tr_17_Template","ɵɵproperty"],"sources":["/Users/artur.zaiats/Documents/Projects/UrlWebApp/src/app/short-urls/short-urls.component.ts","/Users/artur.zaiats/Documents/Projects/UrlWebApp/src/app/short-urls/short-urls.component.html"],"sourcesContent":["import {Subject, takeUntil} from \"rxjs\";\nimport {Component, OnDestroy, OnInit} from \"@angular/core\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {Router} from \"@angular/router\";\n\n@Component({\n  selector: 'app-short-urls',\n  templateUrl: './short-urls.component.html',\n  styleUrls: ['./short-urls.component.css'],\n})\nexport class ShortUrlsComponent implements OnInit, OnDestroy {\n  shortUrls: ShortUrl[] = [];\n  newUrl = '';\n  errorMessage = '';\n  private destroy$ = new Subject<void>();\n\n  constructor(private http: HttpClient, private router: Router) {}\n\n  ngOnInit(): void {\n    this.loadShortUrls();\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  loadShortUrls(): void {\n    this.http\n      .get<ShortUrl[]>('api/short-urls')\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((shortUrls) => {\n        this.shortUrls = shortUrls;\n      });\n  }\n\n  addNewUrl(): void {\n    if (this.newUrl) {\n      this.http\n        .post<{ id: number }>('api/short-urls', { url: this.newUrl })\n        .pipe(takeUntil(this.destroy$))\n        .subscribe(\n          (response) => {\n            this.loadShortUrls();\n            this.newUrl = '';\n            this.errorMessage = '';\n          },\n          (error) => {\n            // Handle error, e.g., set error message\n            this.errorMessage = 'URL already exists.';\n          }\n        );\n    }\n  }\n\n  deleteUrl(id: number): void {\n    this.http\n      .delete(`api/short-urls/${id}`)\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(() => {\n        this.loadShortUrls();\n      });\n  }\n\n  viewDetails(id: number): void {\n    this.router.navigate([`/short-url-info/${id}`]);\n  }\n}\n","<h2>Short URLs Table View</h2>\n<div *ngIf=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</div>\n<table>\n  <thead>\n  <tr>\n    <th>ID</th>\n    <th>Short URL</th>\n    <th>Created At</th>\n    <th>Owner User</th>\n    <th>Actions</th>\n  </tr>\n  </thead>\n  <tbody>\n  <tr *ngFor=\"let shortUrl of shortUrls\">\n    <td>{{ shortUrl.urlId }}</td>\n    <td>{{ shortUrl.shortUrl }}</td>\n    <td>{{ shortUrl.createdAt }}</td>\n    <td>{{ shortUrl.ownerUser.name }}</td>\n    <td>\n      <button (click)=\"viewDetails(shortUrl.urlId)\">\n"],"mappings":"AAAA,SAAQA,OAAO,EAAEC,SAAS,QAAO,MAAM;;;;;;;ICCvCC,EAAA,CAAAC,cAAA,aAAgD;IAAAD,EAAA,CAAAE,MAAA,GAAkB;IAAAF,EAAA,CAAAG,YAAA,EAAM;;;;IAAxBH,EAAA,CAAAI,SAAA,GAAkB;IAAlBJ,EAAA,CAAAK,iBAAA,CAAAC,MAAA,CAAAC,YAAA,CAAkB;;;;;;IAYhEP,EAAA,CAAAC,cAAA,SAAuC;IACjCD,EAAA,CAAAE,MAAA,GAAoB;IAAAF,EAAA,CAAAG,YAAA,EAAK;IAC7BH,EAAA,CAAAC,cAAA,SAAI;IAAAD,EAAA,CAAAE,MAAA,GAAuB;IAAAF,EAAA,CAAAG,YAAA,EAAK;IAChCH,EAAA,CAAAC,cAAA,SAAI;IAAAD,EAAA,CAAAE,MAAA,GAAwB;IAAAF,EAAA,CAAAG,YAAA,EAAK;IACjCH,EAAA,CAAAC,cAAA,SAAI;IAAAD,EAAA,CAAAE,MAAA,GAA6B;IAAAF,EAAA,CAAAG,YAAA,EAAK;IACtCH,EAAA,CAAAC,cAAA,SAAI;IACMD,EAAA,CAAAQ,UAAA,mBAAAC,2DAAA;MAAA,MAAAC,WAAA,GAAAV,EAAA,CAAAW,aAAA,CAAAC,GAAA;MAAA,MAAAC,WAAA,GAAAH,WAAA,CAAAI,SAAA;MAAA,MAAAC,MAAA,GAAAf,EAAA,CAAAgB,aAAA;MAAA,OAAShB,EAAA,CAAAiB,WAAA,CAAAF,MAAA,CAAAG,WAAA,CAAAL,WAAA,CAAAM,KAAA,CAA2B;IAAA,EAAC;IAA7CnB,EAAA,CAAAG,YAAA,EAA8C;;;;IAL5CH,EAAA,CAAAI,SAAA,GAAoB;IAApBJ,EAAA,CAAAK,iBAAA,CAAAQ,WAAA,CAAAM,KAAA,CAAoB;IACpBnB,EAAA,CAAAI,SAAA,GAAuB;IAAvBJ,EAAA,CAAAK,iBAAA,CAAAQ,WAAA,CAAAO,QAAA,CAAuB;IACvBpB,EAAA,CAAAI,SAAA,GAAwB;IAAxBJ,EAAA,CAAAK,iBAAA,CAAAQ,WAAA,CAAAQ,SAAA,CAAwB;IACxBrB,EAAA,CAAAI,SAAA,GAA6B;IAA7BJ,EAAA,CAAAK,iBAAA,CAAAQ,WAAA,CAAAS,SAAA,CAAAC,IAAA,CAA6B;;;ADZrC,MAKaC,kBAAkB;EAM7BC,YAAoBC,IAAgB,EAAUC,MAAc;IAAxC,KAAAD,IAAI,GAAJA,IAAI;IAAsB,KAAAC,MAAM,GAANA,MAAM;IALpD,KAAAC,SAAS,GAAe,EAAE;IAC1B,KAAAC,MAAM,GAAG,EAAE;IACX,KAAAtB,YAAY,GAAG,EAAE;IACT,KAAAuB,QAAQ,GAAG,IAAIhC,OAAO,EAAQ;EAEyB;EAE/DiC,QAAQA,CAAA;IACN,IAAI,CAACC,aAAa,EAAE;EACtB;EAEAC,WAAWA,CAAA;IACT,IAAI,CAACH,QAAQ,CAACI,IAAI,EAAE;IACpB,IAAI,CAACJ,QAAQ,CAACK,QAAQ,EAAE;EAC1B;EAEAH,aAAaA,CAAA;IACX,IAAI,CAACN,IAAI,CACNU,GAAG,CAAa,gBAAgB,CAAC,CACjCC,IAAI,CAACtC,SAAS,CAAC,IAAI,CAAC+B,QAAQ,CAAC,CAAC,CAC9BQ,SAAS,CAAEV,SAAS,IAAI;MACvB,IAAI,CAACA,SAAS,GAAGA,SAAS;IAC5B,CAAC,CAAC;EACN;EAEAW,SAASA,CAAA;IACP,IAAI,IAAI,CAACV,MAAM,EAAE;MACf,IAAI,CAACH,IAAI,CACNc,IAAI,CAAiB,gBAAgB,EAAE;QAAEC,GAAG,EAAE,IAAI,CAACZ;MAAM,CAAE,CAAC,CAC5DQ,IAAI,CAACtC,SAAS,CAAC,IAAI,CAAC+B,QAAQ,CAAC,CAAC,CAC9BQ,SAAS,CACPI,QAAQ,IAAI;QACX,IAAI,CAACV,aAAa,EAAE;QACpB,IAAI,CAACH,MAAM,GAAG,EAAE;QAChB,IAAI,CAACtB,YAAY,GAAG,EAAE;MACxB,CAAC,EACAoC,KAAK,IAAI;QACR;QACA,IAAI,CAACpC,YAAY,GAAG,qBAAqB;MAC3C,CAAC,CACF;;EAEP;EAEAqC,SAASA,CAACC,EAAU;IAClB,IAAI,CAACnB,IAAI,CACNoB,MAAM,CAAC,kBAAkBD,EAAE,EAAE,CAAC,CAC9BR,IAAI,CAACtC,SAAS,CAAC,IAAI,CAAC+B,QAAQ,CAAC,CAAC,CAC9BQ,SAAS,CAAC,MAAK;MACd,IAAI,CAACN,aAAa,EAAE;IACtB,CAAC,CAAC;EACN;EAEAd,WAAWA,CAAC2B,EAAU;IACpB,IAAI,CAAClB,MAAM,CAACoB,QAAQ,CAAC,CAAC,mBAAmBF,EAAE,EAAE,CAAC,CAAC;EACjD;;AAxDWrB,kBAAkB,C;mBAAlBA,kBAAkB,EAAAxB,EAAA,CAAAgD,iBAAA,CAAAC,EAAA,CAAAC,UAAA,GAAAlD,EAAA,CAAAgD,iBAAA,CAAAG,EAAA,CAAAC,MAAA;AAAA;AAAlB5B,kBAAkB,C;QAAlBA,kBAAkB;EAAA6B,SAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,4BAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MCV/B3D,EAAA,CAAAC,cAAA,SAAI;MAAAD,EAAA,CAAAE,MAAA,4BAAqB;MAAAF,EAAA,CAAAG,YAAA,EAAK;MAC9BH,EAAA,CAAA6D,UAAA,IAAAC,iCAAA,iBAAwE;MACxE9D,EAAA,CAAAC,cAAA,YAAO;MAGCD,EAAA,CAAAE,MAAA,SAAE;MAAAF,EAAA,CAAAG,YAAA,EAAK;MACXH,EAAA,CAAAC,cAAA,SAAI;MAAAD,EAAA,CAAAE,MAAA,gBAAS;MAAAF,EAAA,CAAAG,YAAA,EAAK;MAClBH,EAAA,CAAAC,cAAA,UAAI;MAAAD,EAAA,CAAAE,MAAA,kBAAU;MAAAF,EAAA,CAAAG,YAAA,EAAK;MACnBH,EAAA,CAAAC,cAAA,UAAI;MAAAD,EAAA,CAAAE,MAAA,kBAAU;MAAAF,EAAA,CAAAG,YAAA,EAAK;MACnBH,EAAA,CAAAC,cAAA,UAAI;MAAAD,EAAA,CAAAE,MAAA,eAAO;MAAAF,EAAA,CAAAG,YAAA,EAAK;MAGlBH,EAAA,CAAAC,cAAA,aAAO;MACPD,EAAA,CAAA6D,UAAA,KAAAE,iCAAA,iBAAuC;MADvC/D,EAAA,CAAAG,YAAA,EAAO;;;MAXHH,EAAA,CAAAI,SAAA,GAAkB;MAAlBJ,EAAA,CAAAgE,UAAA,SAAAJ,GAAA,CAAArD,YAAA,CAAkB;MAYGP,EAAA,CAAAI,SAAA,IAAY;MAAZJ,EAAA,CAAAgE,UAAA,YAAAJ,GAAA,CAAAhC,SAAA,CAAY;;;;;;SDH1BJ,kBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}